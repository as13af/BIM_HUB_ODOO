<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
  <t t-name="owl.js_template" owl="1">
    <div class="container-fluid bg-light vh-100 overflow-auto py-4">
      <!-- Header -->
      <div class="row mb-4">
        <div class="col">
          <div class="card shadow-sm border-0">
            <div class="card-body d-flex justify-content-between align-items-center">
              <h1 class="text-primary fw-bold mb-0">Custom BIM Dashboard</h1>
              <select class="form-select w-auto" t-on-change="onFilterChange">
                <option value="0">Select Period</option>
                <option value="7">Last 7 Days</option>
                <option value="30">Last 30 Days</option>
                <option value="90">Last 90 Days</option>
                <option value="365">Last 365 Days</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- KPI Cards -->
      <div class="row g-3 mb-4">
        <KpiCard name="'Active Projects'" value="state.metrics.projectCount" percentage="6"/>
        <KpiCard name="'Open Issues'" value="state.metrics.openIssues" percentage="20"/>
        <KpiCard name="'Pending Documents'" value="state.metrics.pendingDocs" percentage="-3"/>
        <KpiCard name="'Approved Documents'" value="state.metrics.approvedDocs" percentage="-10"/>
      </div>

      <!-- Charts -->
      <div class="row g-3">
        <div class="col-lg-6">
          <div class="card shadow-sm border-0 h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="text-primary fw-bold mb-0">Issue Status Distribution</h5>
                <button class="btn btn-sm btn-outline-primary">
                  <i class="fa fa-arrow-right"></i>
                </button>
              </div>
              <ChartRenderer type="'doughnut'" title="'Issue Status Distribution'" data="state.metrics.issueChart"/>
            </div>
          </div>
        </div>

        <div class="col-lg-6">
          <div class="card shadow-sm border-0 h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="text-primary fw-bold mb-0">Project Type Distribution</h5>
                <button class="btn btn-sm btn-outline-primary">
                  <i class="fa fa-arrow-right"></i>
                </button>
              </div>
              <ChartRenderer type="'pie'" title="'Project Type Distribution'" data="state.metrics.projectTypeChart"/>
            </div>
          </div>
        </div>
      </div>

          <!-- Additional Charts -->
      <!-- Additional Charts -->
      <div class="row g-3 mt-4">
        <!-- Project Status Distribution -->
        <div class="col-lg-6">
          <div class="card shadow-sm border-0 h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="text-primary fw-bold mb-0">Project Status Distribution</h5>
                <button class="btn btn-sm btn-outline-primary">
                  <i class="fa fa-arrow-right"></i>
                </button>
              </div>
              <ChartRenderer type="'pie'" title="'Project Status Distribution'" data="state.metrics.projectStatusType"/>
            </div>
          </div>
        </div>

        <!-- Issue Priority Distribution -->
        <div class="col-lg-6">
          <div class="card shadow-sm border-0 h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="text-primary fw-bold mb-0">Issue Priority Distribution</h5>
                <button class="btn btn-sm btn-outline-primary">
                  <i class="fa fa-arrow-right"></i>
                </button>
              </div>
              <ChartRenderer type="'pie'" title="'Issue Priority Distribution'" data="state.metrics.issuePriorityType"/>
            </div>
          </div>
        </div>
      </div>

      <div class="row g-3 mt-4">
        <!-- Document Status Distribution -->
        <div class="col-lg-6">
          <div class="card shadow-sm border-0 h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="text-primary fw-bold mb-0">Document Status Distribution</h5>
                <button class="btn btn-sm btn-outline-primary">
                  <i class="fa fa-arrow-right"></i>
                </button>
              </div>
              <ChartRenderer type="'pie'" title="'Document Status Distribution'" data="state.metrics.documentStatusType"/>
            </div>
          </div>
        </div>

        <!-- Digital Twin Status Distribution -->
        <div class="col-lg-6">
          <div class="card shadow-sm border-0 h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="text-primary fw-bold mb-0">Digital Twin Status Distribution</h5>
                <button class="btn btn-sm btn-outline-primary">
                  <i class="fa fa-arrow-right"></i>
                </button>
              </div>
              <ChartRenderer type="'pie'" title="'Digital Twin Status Distribution'" data="state.metrics.digital_twinStatusType"/>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </t>
</templates>
